# 188_Best_Time_to_Buy_and_Sell_StockIV

### Johnmmm 2018.11.02

## 思路

主要思路在123题中提到。

主要式子：

`tmpmax[i] = max(tmpmax[i], dp[i-1][j-1]-prices[j])`
`dp[i][j] = max(dp[i][j-1], prices[j]+tmpmax[i])`

在本题当中遇到数据过大的问题，k丧心病狂的大到了1000000000。因此需要优化一下。

##### 优化方案一：

其是在本题当中，可以先对输入进行预处理，将连续上升的部分进行整合，如将`1->3->6`变为`1->6`。这样可以减小整个数组长度。

##### 优化方案二：

本来需要dp的深度为k，但是实际上买的次数最大不会超过数组长度，因此直接令`k=prices.size()`即可。

##### 优化方案三：

从两个式子当中可以看出，整个dp每一次都是从左向右推，因此可以将其简化为一个一维数组。只需要记录一个`lastdp`即可。